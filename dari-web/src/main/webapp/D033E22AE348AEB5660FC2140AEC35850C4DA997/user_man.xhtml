<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">


<head>
<meta charset="utf-8"></meta>
<meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
<meta http-equiv="Content-Language" content="en"></meta>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
<title>User Management</title>
<link rel="icon"
	href="#{request.contextPath}/D033E22AE348AEB5660FC2140AEC35850C4DA997/resources/assets/images/logo.png"
	type="image/x-icon"></link>
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no"></meta>
<meta name="msapplication-tap-highlight" content="no"></meta>
<style type="text/css">
@import url(https://fonts.googleapis.com/css?family=Open+Sans);

body{
  background: #f2f2f2;
  font-family: 'Open Sans', sans-serif;
}

.search {
  width: 100%;
  position: relative;
  display: flex;
  
}

.searchTerm {
  width: 100%;
  border: 3px solid #00B4CC;
  border-right: none;
  padding: 5px;
  height: 36px;
  border-radius: 5px 0 0 5px;
  outline: none;
  color: #9DBFAF;
  
}

.searchTerm:focus{
  color: #00B4CC;
}

.searchButton {
  width: 40px;
  height: 36px;
  border: 1px solid #00B4CC;
  background: #00B4CC;
  text-align: center;
  color: #fff;
  border-radius: 0 5px 5px 0;
  cursor: pointer;
  font-size: 20px;
}

/*Resize the wrap to see the search bar change!*/
.wrap{
  width: 30%;
  position: absolute;
  top: 5%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.ui-datatable {
        margin-bottom: 25px
    }
 
    .ui-datatable .ui-datatable-header {
        text-align: right !important;
    }
 
    .ui-button-text-only .ui-button-text {
        padding: 0.3em 0.4em;
    }
 
    .ui-selectcheckboxmenu-panel .ui-selectcheckboxmenu-header .ui-chkbox {
        visibility: hidden;
    }
 
    .ui-filter-column .ui-column-customfilter .custom-filter {
        width: 100%;
        box-sizing: border-box;
    }
 
    .year-spinner input {
        width: 100%;
        box-sizing: border-box;
    }
</style>

<link
	href="#{request.contextPath}/D033E22AE348AEB5660FC2140AEC35850C4DA997/resources/assets/css/main.css"
	rel="stylesheet" />
</head>

<body>
	<div
		class="app-container app-theme-white body-tabs-shadow fixed-sidebar fixed-header">
		<div class="app-header header-shadow">
			<div class="app-header__logo">
				<div class="logo-src"></div>
				<div class="header__pane ml-auto">
					<div>
						<button type="button"
							class="hamburger close-sidebar-btn hamburger--elastic"
							data-class="closed-sidebar">
							<span class="hamburger-box"> <span class="hamburger-inner"></span>
							</span>
						</button>
					</div>
				</div>
			</div>
			<div class="app-header__mobile-menu">
				<div>
					<button type="button"
						class="hamburger hamburger--elastic mobile-toggle-nav">
						<span class="hamburger-box"> <span class="hamburger-inner"></span>
						</span>
					</button>
				</div>
			</div>
			<div class="app-header__menu">
				<span>
					<button type="button"
						class="btn-icon btn-icon-only btn btn-primary btn-sm mobile-toggle-header-nav">
						<span class="btn-icon-wrapper"> <i
							class="fa fa-ellipsis-v fa-w-6"></i>
						</span>
					</button>
				</span>
			</div>
			<div class="app-header__content">

				<div class="app-header-right">
					<div class="header-btn-lg pr-0">
						<div class="widget-content p-0">
							<div class="widget-content-wrapper">
								<div class="widget-content-left">
									<div class="btn-group">
										<a data-toggle="dropdown" aria-haspopup="true"
											aria-expanded="false" class="p-0 btn"> <img width="42"
											class="rounded-circle"
											src="#{authenticationBean.user.profile_image}" alt="">
										</img><i class="fa fa-angle-down ml-2 opacity-8"></i></a>
										<div tabindex="-1" role="menu" aria-hidden="true"
											class="dropdown-menu dropdown-menu-right">
											<button type="button" tabindex="0" class="dropdown-item">User
												Account</button>
											<button type="button" tabindex="0" class="dropdown-item">Settings</button>

											<div tabindex="-1" class="dropdown-divider"></div>
											<h:form id="form">
												<h:commandButton value="SIGN OUT" id="btn" type="submit"
													tabindex="0" class="dropdown-item"
													action="#{authenticationBean.doLogout()}">
												</h:commandButton>
											</h:form>
										</div>
									</div>
								</div>
								<div class="widget-content-left  ml-3 header-user-info">
									<div class="widget-heading">Welcome</div>
									<div class="widget-subheading">
										<h:form>
											<h:outputText value="#{authenticationBean.user.nom}" />
										</h:form>
									</div>
								</div>

							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="app-main">
			<div class="app-sidebar sidebar-shadow">
				<div class="app-header__logo">
					<div class="logo-src"></div>
					<div class="header__pane ml-auto">
						<div>
							<button type="button"
								class="hamburger close-sidebar-btn hamburger--elastic"
								data-class="closed-sidebar">
								<span class="hamburger-box"> <span
									class="hamburger-inner"></span>
								</span>
							</button>
						</div>
					</div>
				</div>
				<div class="app-header__mobile-menu">
					<div>
						<button type="button"
							class="hamburger hamburger--elastic mobile-toggle-nav">
							<span class="hamburger-box"> <span class="hamburger-inner"></span>
							</span>
						</button>
					</div>
				</div>
				<div class="app-header__menu">
					<span>
						<button type="button"
							class="btn-icon btn-icon-only btn btn-primary btn-sm mobile-toggle-header-nav">
							<span class="btn-icon-wrapper"> <i
								class="fa fa-ellipsis-v fa-w-6"></i>
							</span>
						</button>
					</span>
				</div>
				<div class="scrollbar-sidebar">
					<div class="app-sidebar__inner">
						<ul class="vertical-nav-menu">
							<li class="app-sidebar__heading">Admin Dari</li>

							<li><a
								href="#{request.contextPath}/D033E22AE348AEB5660FC2140AEC35850C4DA997/admin.jsf">
									<i class="metismenu-icon pe-7s-rocket"></i> Home

							</a></li>
							<li class="app-sidebar__heading">User Management</li>
							<li><a href="#" class="mm-active"> <i
									class="metismenu-icon pe-7s-users"></i> User Management <i
									class="metismenu-state-icon pe-7s-angle-down caret-left"></i>
							</a>
								<ul>
									<li><a
										href="#{request.contextPath}/D033E22AE348AEB5660FC2140AEC35850C4DA997/user_man.jsf">
											<i class="metismenu-icon"></i> User List
									</a></li>

								</ul></li>
							<li class="app-sidebar__heading">Furniture Management</li>
							<li><a href="#"> <i class="metismenu-icon pe-7s-credit"></i>
									Furniture Management <i
									class="metismenu-state-icon pe-7s-angle-down caret-left"></i>
							</a>
								<ul>
									<li><a
										href="#{request.contextPath}/D033E22AE348AEB5660FC2140AEC35850C4DA997/furniture_man.jsf">
											<i class="metismenu-icon"></i> Online Furniture List
									</a></li>

								</ul></li>
							<li class="app-sidebar__heading">Post Management</li>
							<li><a href="#"> <i class="metismenu-icon pe-7s-comment"></i>
									Post Management <i
									class="metismenu-state-icon pe-7s-angle-down caret-left"></i>
							</a>
								<ul>
									<li><a href="elements-buttons-standard.html"> <i
											class="metismenu-icon"></i> Post List
									</a></li>

								</ul></li>
							<li class="app-sidebar__heading">Subscriptions Management</li>
							<li><a href="dashboard-boxes.html"> <i
									class="metismenu-icon pe-7s-display2"></i> Subscriptions
									Management
							</a></li>
							<li class="app-sidebar__heading">Visits Management</li>
							<li><a href="dashboard-boxes.html"> <i
									class="metismenu-icon pe-7s-map-2"></i> Visits Management
							</a></li>
							<li class="app-sidebar__heading">Loans Simulation Management</li>
							<li><a href="dashboard-boxes.html"> <i
									class="metismenu-icon pe-7s-piggy"></i> Loans Simulation
									Management
							</a></li>
						</ul>
					</div>
				</div>
			</div>
			<div class="app-main__outer">
				<div class="app-main__inner">
					<div class="app-page-title">
						<div class="page-title-wrapper">
							<div class="page-title-heading">
								<div class="page-title-icon">
									<i class="pe-7s-drawer icon-gradient bg-happy-itmeo"> </i>
								</div>
								<div>User Management</div>
							</div>

						</div>
					</div>

					<div class="row">
						<div class="col-md-12">
							<div class="main-card mb-3 card">
								<div class="card-header">Users</div>
								<div class="table-responsive">
								
									<h:form>
										<p:dataTable 
											class="align-middle mb-0 table table-borderless table-striped table-hover"
											value="#{dtFilterUsers.users}" var="user" widgetVar="usersTable" emptyMessage="No users found with given criteria"
											filteredValue="#{dtFilterUsers.filteredUsers}" globalFilterFunction="#{dtFilterUsers.globalFilterFunction}">
											
											<div class="widget-content p-0">
												<div class="widget-content-wrapper">
													<f:facet name="header">
													 <p:outputPanel>
													<div class="wrap">
												<div class="search">
													<p:inputText id="globalFilter" onkeyup="PF('usersTable').filter()"  class="searchTerm"
														placeholder="Search.."/>
														<button type="submit" class="searchButton">
															<i class="fa fa-search"></i>
														</button>
												</div>
											</div>
											</p:outputPanel>
											 </f:facet>
													<div class="widget-content-left mr-3">
												
														<p:column class="text-center">
															<f:facet name="header" class="text-center">
																<h:outputText class="text-center" value="ID" />
															</f:facet>
															<h:outputText class="text-center text-muted"
																value="#{user.id_user}" />
														</p:column>
														<div class="widget-content-left">
															<p:column>
																<img width="40" class="rounded-circle"
																	src="#{user.profile_image}" alt=""></img>
															</p:column>
														</div>

														<p:column class="text-center">
															<f:facet name="header" class="text-center">
																<h:outputText class="text-center" value="First Name" />
															</f:facet>
															<h:outputText class="text-center text-muted"
																value="#{user.prenom}" />
														</p:column>
														<p:column class="text-center">
															<f:facet name="header" class="text-center">
																<h:outputText class="text-center" value="Last Name" />
															</f:facet>
															<h:outputText class="text-center text-muted"
																value="#{user.nom}" />
														</p:column>
														<p:column class="text-center">
															<f:facet name="header" class="text-center">
																<h:outputText class="text-center" value="Email" />
															</f:facet>
															<h:outputText class="text-center text-muted"
																value="#{user.email}" />
														</p:column>
														<p:column class="text-center">
															<f:facet name="header" class="text-center">
																<h:outputText class="text-center" value="Creation Date" />
															</f:facet>
															<h:outputText class="text-center text-muted"
																value="#{user.creation_date}" />
														</p:column>
														<p:column class="text-center">
															<f:facet name="header" class="text-center">
																<h:outputText class="text-center" value="Last Login" />
															</f:facet>
															<h:outputText class="text-center text-muted"
																value="#{user.last_login}" />
														</p:column>
														<p:column class="text-center">
															<f:facet name="header" class="text-center">
																<h:outputText class="text-center" value="Role" />
															</f:facet>
															<h:outputText class="badge badge-danger" value="Admin"
																rendered="#{user.role == 'ROLE_a1'}" />
															<h:outputText class="badge badge-info" value="User"
																rendered="#{user.role == 'ROLE_a0'}" />
														</p:column>


														<p:column class="text-center">
															<f:facet name="header" class="text-center">
																<h:outputText class="text-center" value="Status" />
															</f:facet>
															<h:outputText class="badge badge-success"
																value="#{user.status}"
																rendered="#{user.status == 'TRUE'}" />
															<h:outputText class="badge badge-danger"
																value="#{user.status}"
																rendered="#{user.status == 'FALSE'}" />
														</p:column>

														<p:column class="text-center">
															<f:facet name="header" class="text-center">
																<h:outputText class="text-center" value="Reports" />
															</f:facet>
															<h:outputText class="badge badge-info"
																value="#{furnitureBean.getreportnumber(user)}"
																rendered="#{furnitureBean.getreportnumber(user) lt 5}" />
															<h:outputText class="badge badge-warning"
																value="#{furnitureBean.getreportnumber(user)}"
																rendered="#{furnitureBean.getreportnumber(user) ge 5 and furnitureBean.getreportnumber(user) lt 10}" />
															<h:outputText class="badge badge-danger"
																value="#{furnitureBean.getreportnumber(user)}"
																rendered="#{furnitureBean.getreportnumber(user) ge 10}" />
														</p:column>

														<p:column class="text-center">
															<f:facet name="header" class="text-center">
																<h:outputText class="text-center" value="Ban" />
															</f:facet>
															<h:commandButton class="mb-2 mr-2 btn btn-danger"
																action="#" value="N/A"
																rendered="#{user.role == 'ROLE_a1'}" />
															<h:commandButton class="mb-2 mr-2 btn btn-info"
																action="#{userBean.ChangeStatus(user)}"
																value="Deactivate"
																rendered="#{user.status == 'TRUE' and user.role == 'ROLE_a0' and (furnitureBean.getreportnumber(user) lt 5)}" />
															<h:commandButton class="mb-2 mr-2 btn btn-warning"
																action="#{userBean.ChangeStatus(user)}"
																value="Deactivate"
																rendered="#{user.status == 'TRUE' and user.role == 'ROLE_a0' and  (furnitureBean.getreportnumber(user) ge 5) and (furnitureBean.getreportnumber(user) lt 10)}" />
															<h:commandButton class="mb-2 mr-2 btn btn-danger"
																action="#{userBean.ChangeStatus(user)}"
																value="Deactivate"
																rendered="#{user.status == 'TRUE' and user.role == 'ROLE_a0' and (furnitureBean.getreportnumber(user) ge 10)}" />
															<h:commandButton class="mb-2 mr-2 btn btn-success"
																action="#{userBean.ChangeStatus(user)}" value="Activate"
																rendered="#{user.status == 'FALSE' and user.role == 'ROLE_a0'}" />


														</p:column>

														<p:column class="text-center">
															<f:facet name="header" class="text-center">
																<h:outputText class="text-center" value="Delete" />
															</f:facet>
															<h:commandButton class="mb-2 mr-2 btn btn-danger"
																action="#" value="N/A"
																rendered="#{user.role == 'ROLE_a1'}" />
															<h:commandButton class="mb-2 mr-2 btn btn-info"
																action="#{userBean.DeleteUserAdmin(user)}"
																value="Delete"
																rendered="#{user.role == 'ROLE_a0' and (furnitureBean.getreportnumber(user) lt 5)}" />
															<h:commandButton class="mb-2 mr-2 btn btn-warning"
																action="#{userBean.DeleteUserAdmin(user)}"
																value="Delete"
																rendered="#{user.role == 'ROLE_a0' and  (furnitureBean.getreportnumber(user) ge 5) and (furnitureBean.getreportnumber(user) lt 10)}" />
															<h:commandButton class="mb-2 mr-2 btn btn-danger"
																action="#{userBean.DeleteUserAdmin(user)}"
																value="Delete"
																rendered="#{user.role == 'ROLE_a0' and (furnitureBean.getreportnumber(user) ge 10)}" />
														</p:column>

													</div>
												</div>
											</div>


										</p:dataTable>
									</h:form>
								</div>

							</div>
						</div>
					</div>
				</div>



			</div>
		</div>
		<script type="text/javascript"
			src="#{request.contextPath}/D033E22AE348AEB5660FC2140AEC35850C4DA997/resources/assets/scripts/main.js"></script>
	</div>
</body>
</html>